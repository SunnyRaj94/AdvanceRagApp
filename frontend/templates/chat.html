<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Chat with RAG</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <script src="/static/js/app.js" defer></script>
</head>

<body>
  <div class="container">
    <aside class="sidebar">
      <h2>Sources</h2>

      <div class="context-group">
        <h3>Files</h3>
        <ul id="file-list" class="context-list"></ul>
      </div>

      <div class="context-group">
        <h3>Links</h3>
        <ul id="link-list" class="context-list"></ul>
      </div>

      <div class="ingest-controls">
        <select id="source-type" onchange="toggleInputFields()" class="styled-select">
          <option value="file">File</option>
          <option value="link">Link</option>
        </select>

        <div id="file-input-group">
          <input type="file" id="file-input" class="styled-input" />
        </div>

        <div id="link-input-group" style="display: none">
          <input type="text" id="link-input" placeholder="Enter link" class="styled-input" />
        </div>

        <button onclick="ingestSource()" class="btn btn-ingest">Ingest</button>
        <button onclick="refreshContext()" class="btn btn-secondary">Refresh</button>
      </div>
    </aside>

    <main class="main-content">
      <h1>Chat with RAG</h1>

      <form id="chat-form" class="chat-form">
        <input type="text" id="query" name="query" placeholder="Enter your query..." class="styled-input" required />

        <div class="source-select-row">
          <label for="source_type">Source:</label>
          <select id="source_type" name="source_type" class="styled-select">
            <option value="all">All</option>
            <option value="file">File</option>
            <option value="url">URL</option>
          </select>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      <div class="response-section">
        <h2>Response</h2>
        <pre id="chat-response" class="chat-response"></pre>
      </div>
    </main>
  </div>
  <div id="loading-spinner" class="loading-spinner" style="display: none;">
    <div class="spinner"></div>
  </div>

</body>

</html>